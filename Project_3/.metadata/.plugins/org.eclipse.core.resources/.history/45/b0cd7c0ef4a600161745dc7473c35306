/*
 * messageint.c
 *
 *  Created on: Nov 4, 2016
 *      Author: Mukund Madhusudan Atre
 */
#include "MKL25Z4.h"
#include <stdint.h>
#include <string.h>
#include "messageint.h"
#include "uart.h"
#include "pwm.h"


void Decode_CI_Msg(CI_Msg_t *r)
{
	  if (pkt->command == RED_LED)
	  {
		    if (pkt->data == LOW)
		    {
	          LEDFunction(RED, 150);
		    }
		    else if (pkt->data == MEDIUM)
		    {
	          LEDFunction(RED, 600);
		    }
		    else if (pkt->data == HIGH)
		    {
	          LEDFunction(RED, 900);
		    }

	  }

	  else if (pkt->command == GREEN_LED)
	  {
		    if (pkt->data == LOW)
		    {
	        LEDFunction(GREEN, 150);
		    }
		    else if (pkt->data == MEDIUM)
		    {
	        LEDFunction(GREEN, 600);
		    }
		    else if (pkt->data == HIGH)
		    {
	        LEDFunction(GREEN, 900);
		    }

	  }

	  else if (pkt->command == BLUE_LED)
	  {
	    if (pkt->data == LOW)
		{
	      LEDFunction(BLUE, 150);
		}
		else if (pkt->data == MEDIUM)
		{
	      LEDFunction(BLUE, 600);
		}
		else if (pkt->data == HIGH)
		{
	      LEDFunction(BLUE, 900);
		}
	  }

}

void message_map()
{
	uint8_t i,c = 0;
	uint8_t *ptr = (uint8_t*) r;

	for(i=0;i<2;i++)
	 {
		*ptr=(uint8_t)rx_data();
		ptr++;
	}

	for(i=0;i<(pkt->length);i++){
		*ptr=(uint8_t) rx_data();
		ptr++;
	}

	for(i=0;i<2;i++){
		*ptr=(uint8_t) rx_data();
		ptr++;
	}

}
