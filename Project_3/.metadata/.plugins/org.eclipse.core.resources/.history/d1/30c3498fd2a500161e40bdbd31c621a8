/*
 * messageint.c
 *
 *  Created on: Nov 4, 2016
 *      Author: Mukund Madhusudan Atre
 */
#include "MKL25Z4.h"
#include <stdint.h>
#include <string.h>
#include "messageint.h"
#include "uart.h"
#include "pwm.h"

//inptr = (uint8_t*) calloc(4 , sizeof(uint8_t));
uint8_t datain[10];

void Decode_CI_Msg()
{
uint8_t i,c = 0;
uint8_t *ptr = (uint8_t*) pkt;

pkt->command = datain[0];
pkt->length = datain[1];
pkt->data = datain[2];
pkt->checksum = datain[3];
}

void cmd_action()
{
  if (pkt->command == RED_LED)
  {
	    if (pkt->data == LOW)
	    {
          LEDFunction(RED, 150);
	    }
	    else if (pkt->data == MEDIUM)
	    {
          LEDFunction(RED, 600);
	    }
	    else if (pkt->data == HIGH)
	    {
          LEDFunction(RED, 900);
	    }

  }

  else if (pkt->command == GREEN_LED)
  {
	    if (pkt->data == LOW)
	    {
        LEDFunction(GREEN, 150);
	    }
	    else if (pkt->data == MEDIUM)
	    {
        LEDFunction(GREEN, 600);
	    }
	    else if (pkt->data == HIGH)
	    {
        LEDFunction(GREEN, 900);
	    }

  }

  else if (pkt->command == BLUE_LED)
  {
    if (pkt->data == LOW)
	{
      LEDFunction(BLUE, 150);
	}
	else if (pkt->data == MEDIUM)
	{
      LEDFunction(BLUE, 600);
	}
	else if (pkt->data == HIGH)
	{
      LEDFunction(BLUE, 900);
	}
  }
}
